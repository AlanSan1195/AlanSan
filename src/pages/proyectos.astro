---
import Layout from "../layouts/Layout.astro";
import ProjectData from "../data/projects.json";

// Obtener todos los proyectos ordenados por order (m치s reciente primero)
const projectsArray = Object.values(ProjectData);
const selectedProjects = projectsArray
  .filter((project) => project.id)
  .sort((a, b) => b.order - a.order);

const pageTitle = "Proyectos | Alan San - Desarrollador Frontend";
const pageDescription = `Explora ${selectedProjects.length} proyectos de desarrollo web: aplicaciones React, landing pages con animaciones GSAP, juegos en Canvas y m치s. Portfolio de Alan San, desarrollador frontend en Guadalajara.`;

// JSON-LD para la colecci칩n de proyectos
const projectsJsonLd = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  name: pageTitle,
  description: pageDescription,
  url: "https://alansan.dev/proyectos",
  mainEntity: {
    "@type": "ItemList",
    numberOfItems: selectedProjects.length,
    itemListElement: selectedProjects.map((project, index) => ({
      "@type": "ListItem",
      position: index + 1,
      url: `https://alansan.dev/${project.id}`,
      name: project.title,
    })),
  },
};
---

<Layout
  title={pageTitle}
  description={pageDescription}
  image="/imagenes/FotoPerfil.webp"
  jsonLd={projectsJsonLd}
>
  <!-- Back to Portfolio -->
  <section
    class="relative max-w-3xl md:max-w-4xl mx-auto overflow-hidden pt-10 z-10"
  >
    <div class="relative px-4 mb-6">
      <div class="mx-auto mt-2">
        <a
          href="/"
          class=" text-[var(--color-accent)] p-2 w-fit bg-[var(--color-bg-secondary)] border-[1px] hover:bg-[var(--color-bg-card)] border-[var(--color-border)] outline outline-offset-[0.5px] outline-[var(--color-bg)] ll text-sm   justify-center flex transition-colors"
        >
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
          </svg>
        </a>
      </div>
      <!-- Hero -->

      <h1 class="text-4xl md:text-6xl font-alpha text-[var(--color-text)] mb-6">
        Proyectos
      </h1>
      <p
        class="font-king ligero text-sm md:text-lg text-[var(--color-text-muted)] opacity-70 mb-4 max-w-3xl"
      >
        Lo que me he divertido y aprendido con estos otros de por aqui.  
      </p>
    </div>

    <!-- imagenes Demo Grid -->
    <div class="max-w-3xl md:max-w-4xl mx-auto px-4 mb-32">
      <!-- Grid: 1 columna en mobile, 2 columnas en tablet, 3 columnas en desktop (m치ximo 2 filas) -->
      <div
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-[3.5fr, 2fr, 2fr] gap-6 sm:gap-18"
      >
        {
          selectedProjects.map((project) => (
            <div class="group">
              <a
              href={`/${project.id}`}
              class="block transition-transform hover:scale-[1.02] relative outline outline-offset-[0.5px] mt-2 outline-(--color-bg) overflow-hidden aspect-video"
              >
              <img
                transition:name={`transition-${project.id}`}
                src={"srcHero" in project.image ? project.image.srcHero : project.image.src}
                alt={project.image.alt}
                class="w-full h-full object-cover"
                loading="lazy"
                width="640"
                height="360"
                decoding="async"
              />
              </a>

              <div class="mt-3">
              <h3 class="text-[var(--color-text)] text-center sm:text-start font-alpha text-lg md:text-xl m-0">
                {project.title}
              </h3>
              <p class="text-[var(--color-text-muted)] text-center sm:text-start font-satoshi opacity-70 text-base m-0">
                {project.subTitle}
              </p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>
</Layout>


